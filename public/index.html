<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>알바몬 PWA 앱</title>
        <link rel="manifest" href="manifest.webmanifest">
        <link href="/css/site.css" rel="stylesheet" />
    </head>
    <body>
        <div id="app"></div>
        <div>1. 서비스 워커 테스트</div>
        <img src="/images/girl.jpg" alt="소녀" />
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    //-----------------------------------------
                    // 서비스워커 등록(registration)
                    //-----------------------------------------
                    //navigator.serviceWorker.register('/service-worker.js?' + Math.round(new Date().getTime() / 1000), {
                    navigator.serviceWorker.register('/service-worker.js', {
                        scope: '/'
                    }).then(function (reg) {
                        console.log('서비스워커 registration 성공. Scope is ', reg.scope);

                        if (reg.installing) {
                            console.log('Service worker installing');
                        } else if (reg.waiting) {
                            console.log('Service worker installed');
                        } else if (reg.active) {
                            console.log('Service worker active');
                        }
                    }).catch(function (err) {
                        console.log('서비스워커 registration 실패.', err);
                    });
                });
            }
        </script>
        <script src="js/app.bundle.js"></script>
  </body>
</html>